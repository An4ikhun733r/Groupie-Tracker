<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/styles.css">
    <title>Groupie Tracker</title>
</head>
<body>
    <h1>Groupie Tracker</h1>
    <form method="get" action="/filter">
        <div class="filter-container">
            <div class="filters">
                <label>Creation Date</label>
                <div class="filters-range">
                    <label>From: <span id="creation-min-value">1958</span></label>
                    <input class="filter-select" id="creation-min" type="range" name="creation_min" min="1958" max="2015" value="1958" oninput="validateInputsCreation()">
                    <label>To: <span id="creation-max-value">2015</span></label>
                    <input class="filter-select" id="creation-max" type="range" name="creation_max" min="1958" max="2015" value="2015" oninput="validateInputsCreation()">
                </div>
            </div>
            <div class="filters">
                <label>First Album Date</label>
                <div class="filters-range">
                    <label>From: <span id="album-min-value">1963</span></label>
                    <input class="filter-select" id="album-min" type="range" name="album_min" min="1963" max="2018" value="1963" oninput="validateInputsAlbum()">
                    <label>To: <span id="album-max-value">2018</span></label>
                    <input class="filter-select" id="album-max" type="range" name="album_max" min="1963" max="2018" value="2018" oninput="validateInputsAlbum()">
                </div>
            </div>
            <div class="filters">
                <label>Number of Members</label>
                <div class="filters-range">
                    <label>1</label>
                    <input class="filter-select" type="radio" name="members_min" value="1" oninput="validateInputsMembers()" checked>
                    <label>2</label>
                    <input class="filter-select" type="radio" name="members_min" value="2" oninput="validateInputsMembers()">
                    <label>3</label>
                    <input class="filter-select" type="radio" name="members_min" value="3" oninput="validateInputsMembers()">
                    <label>4</label>
                    <input class="filter-select" type="radio" name="members_min" value="4" oninput="validateInputsMembers()">
                    <label>5</label>
                    <input class="filter-select" type="radio" name="members_min" value="5" oninput="validateInputsMembers()">
                    <label>6</label>
                    <input class="filter-select" type="radio" name="members_min" value="6" oninput="validateInputsMembers()">
                    <label>7</label>
                    <input class="filter-select" type="radio" name="members_min" value="7" oninput="validateInputsMembers()">
                    <label>8</label>
                    <input class="filter-select" type="radio" name="members_min" value="8" oninput="validateInputsMembers()">
                </div>
            </div>
            <div class="filters">
                <label>Location:</label>
                <select name="location" id="locationSelect">
                    <option value="All">All</option>
                </select>

                <script>
                    var countries = ["Argentina", "Australia", "Austria", "Belarus", "Belgium", "Brazil", "Canada", "Chile", "China", "Colombia", "Costa Rica", "Czechia", "Denmark", "Finland", "France", "French Polynesia", "Germany", "Greece", "Hungary", "India", "Indonesia", "Ireland", "Italy", "Japan", "Mexico", "Netherlands", "Netherlands Antilles", "New Caledonia", "New Zealand", "Norway", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Saudi Arabia", "Slovakia", "South Korea", "Spain", "Sweden", "Switzerland", "Taiwan", "Thailand", "UK", "United Arab Emirates", "USA"];
            
                    var selectElement = document.getElementById("locationSelect");
            
                    for (var i = 0; i < countries.length; i++) {
                        var option = document.createElement("option");
                        option.value = countries[i];
                        option.text = countries[i];
                        selectElement.appendChild(option);
                    }
                </script>
            </div>
            <div class="buttons">
                <button id="reset" type="submit">APPLY</button>
                <button id="apply" formaction="/">RESET</button>
            </div>
        </div>
    </form> 

    <script>
        const searchInput = document.getElementById('searchInput');
        const suggestionsContainer = document.getElementById('suggestions');
    
        searchInput.addEventListener('input', async () => {
            const searchTerm = searchInput.value.trim();
            suggestionsContainer.innerHTML = '';
    
            if (searchTerm) {
                const response = await fetch(`/autocomplete?search=${searchTerm}`);
                const suggestions = await response.json();
    
                suggestions.slice(0, 3).forEach(suggestion => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.textContent = suggestion;
                    suggestionItem.classList.add('suggestion');
                    suggestionsContainer.appendChild(suggestionItem);
    
                    suggestionItem.addEventListener('click', () => {
                        let lastIndexOfDash = suggestion.lastIndexOf("-");

                        if (lastIndexOfDash !== -1) {
                            suggestion = suggestion.slice(0, lastIndexOfDash-1);
                        }

                        searchInput.value = suggestion;
                        suggestionsContainer.innerHTML = '';
                    });
                });
    
                suggestionsContainer.style.display = 'block';
            } else {
                suggestionsContainer.style.display = 'none';
            }
        });
    
        document.addEventListener('click', event => {
            if (!event.target.closest('.search-container')) {
                suggestionsContainer.style.display = 'none';
            }
        });
    </script>

    <!-- Add the following scripts inside the head or body of your HTML -->
<script>
    function updateCreationMinValue() {
        const creationMinValue = document.getElementById('creation-min-value');
        const creationMinInput = document.getElementById('creation-min');
        creationMinValue.textContent = creationMinInput.value;
    }

    function updateCreationMaxValue() {
        const creationMaxValue = document.getElementById('creation-max-value');
        const creationMaxInput = document.getElementById('creation-max');
        creationMaxValue.textContent = creationMaxInput.value;
    }

    function updateAlbumMinValue() {
        const albumMinValue = document.getElementById('album-min-value');
        const albumMinInput = document.getElementById('album-min');
        albumMinValue.textContent = albumMinInput.value;
    }

    function updateAlbumMaxValue() {
        const albumMaxValue = document.getElementById('album-max-value');
        const albumMaxInput = document.getElementById('album-max');
        albumMaxValue.textContent = albumMaxInput.value;
    }

    // Add the following event listeners to your existing input elements
    document.getElementById('creation-min').addEventListener('input', updateCreationMinValue);
    document.getElementById('creation-max').addEventListener('input', updateCreationMaxValue);
    document.getElementById('album-min').addEventListener('input', updateAlbumMinValue);
    document.getElementById('album-max').addEventListener('input', updateAlbumMaxValue);
</script>

    <ul class="artist-list">
        {{range .}}
        <li>
            <a class="{{.Id}}" href="/artist?id={{.Id}}">
                <img src="{{.Image}}" alt="{{.Name}}">
                <br><span class="name">{{.Name}}</span>
            </a>
        </li>
        {{end}}
    </ul>
    <script src="/static/javascript/filter.js"></script>
</body>
</html>
